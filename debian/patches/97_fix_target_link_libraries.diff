Index: b/smoke/qtuitools/CMakeLists.txt
===================================================================
--- a/smoke/qtuitools/CMakeLists.txt
+++ b/smoke/qtuitools/CMakeLists.txt
@@ -27,7 +27,7 @@
 ENDIF(CMAKE_CXX_FLAGS MATCHES "-fvisibility")
 add_library(smokeqtuitools SHARED ${smokeqtuitools_LIB_SRCS})
 
-target_link_libraries(smokeqtuitools smokeqt ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTUITOOLS_LIBRARY})
+target_link_libraries(smokeqtuitools smokeqt ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTUITOOLS_LIBRARY} ${QT_QTGUI_LIBRARY})
 
 set_target_properties(smokeqtuitools PROPERTIES VERSION 2.0.0 SOVERSION 2 )
 
Index: b/smoke/kde/CMakeLists.txt
===================================================================
--- a/smoke/kde/CMakeLists.txt
+++ b/smoke/kde/CMakeLists.txt
@@ -113,6 +113,7 @@
     ${KDE4_KNEWSTUFF2_LIBS}
     ${KDE4_KPTY_LIBS}
     ${KDE4_KUTILS_LIBS}
+    ${KDE4_KPARTS_LIBS}
     smokeqt )
 
 set_target_properties(smokekde PROPERTIES VERSION 2.0.0 SOVERSION 2 )
Index: b/python/krosspython/CMakeLists.txt
===================================================================
--- a/python/krosspython/CMakeLists.txt
+++ b/python/krosspython/CMakeLists.txt
@@ -44,7 +44,7 @@
 # -ldl seems to be needed (on Linux at least).
 # see http://lists.kde.org/?l=koffice-devel&m=116333261328694&w=2
 # and http://websvn.kde.org/branches/work/kwin_composite/CMakeLists.txt?rev=603677&r1=603384&r2=603677
-target_link_libraries(krosspython ${QT_QTCORE_LIBRARY} ${KDE4_KPTY_LIBS} ${KDE4_KROSSCORE_LIBS} ${PYTHON_LIBRARIES} ${CMAKE_DL_LIBS})
+target_link_libraries(krosspython ${QT_QTCORE_LIBRARY} ${KDE4_KPTY_LIBS} ${KDE4_KROSSCORE_LIBS} ${PYTHON_LIBRARIES} ${CMAKE_DL_LIBS} ${QT_QTGUI_LIBRARY})
 
 install(TARGETS krosspython  DESTINATION ${PLUGIN_INSTALL_DIR})
 
